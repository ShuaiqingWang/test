<!doctype html>
<html>
<head>
    <link href="../static/css/styles.css" rel="stylesheet" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Userhome Organizer</title>
</head>
<body>
<!--引入 templates/fragments/header.html中的navbar-->
<!--<nav th:replace="fragments/header :: navbar"></nav>-->

<!--这部分是你要写的部分-->
<span class="userHomeTitle">Welcome back, <b style="color: #9A9A9A">usergroup</b> FirstName </span>


<div class="frameContainer">

    <div class="tab">
        <button class="tablinks" onclick="openTabs(event, 'VenueInformation')" id="defaultOpen" style="width:33.3%; border-radius: 20px 0px 0px 0px" >Venue Information</button>
        <button class="tablinks" onclick="openTabs(event, 'PhotoGallery')" style="width:33.3%">Photo Gallery</button>
        <button class="tablinks" onclick="openTabs(event, 'StallInformation')" style="width:33.4%; border-radius: 0px 20px 0px 0px">Stall Information</button>
    </div>

    <!-- Tab content -->
    <div id="VenueInformation" class="tabcontent">
        <div class="bookingItem">
            <div class="orderNum">Order #CV0325</div>
            <div class="marketStall">Surry Hills Market, Stall #62</div>
            <div class="dateAddress">12/09/2023 - Crown St, Surry Hills NSW 2010 </div>
            <button type="button" id="review" class="reviewBtn" onclick="openREForm()">View Registration Detail</button>
            <button type="button" id="approve" class="approveBtn" onclick="approveClick()">Approve</button>
            <button type="button" id="deny" class="denyBtn" onclick="denyClick()">Deny</button>
            <button type="button" id="review2" class="reviewBtn2" onclick="openREForm()">View Registration Detail</button>
            <button type="button" id="deny2" class="denyBtn2" onclick="denyClick()">Denied</button>
            <br><div class="userline"></div>
        </div>

    </div>

    <div id="PhotoGallery" class="tabcontent">
        <span class="photoText">Add photos of Venue to let others have a better knowledge of the Venue:</span>
        <input type="file" id="fileInput" accept="image/*" class="photoInput" multiple>
        <div id="imageContainer" class="photoDiv"></div>
    </div>

    <div id="StallInformation" class="tabcontent" style="display: none">
        <div class="bookingHistoryItem">
            <div class="orderNum">Order #CV0325</div>
            <div class="marketStall">Surry Hills Market, Stall #62</div>
            <div class="dateAddress">12/09/2023 - Crown St, Surry Hills NSW 2010 </div>
            <div class="priceHistory">$00</div>
            <button type="submit" class="viewBtn2" onclick="">View Order Detail</button>
            <br><div class="userline"></div>
        </div>
    </div>



</div>
<div class="blackLayer" id="layer"></div>
<div class="review-popup" id="reForm">
    <button type="button" class="btn cancel" onclick="closeREForm()">x</button>
    <form action="#" class="form-container">
        <!--    need to modify-->

        <h2 style="text-align: center">Registration Review</h2>

        <label><b>First Name</b></label>
        <input type="text" placeholder="Enter your first name" name="firstName" required>

        <label style="margin-left: 25px"><b>Last Name</b></label>
        <input type="text" placeholder="Enter your last name" name="lastName" required>

        <label><b>Business Name</b></label>
        <input type="text" placeholder="Enter your business name, optional" name="businessName">

        <label><b>ABN Number</b></label>
        <input type="text" placeholder="Enter your ABN number, optional" name="abn">

        <label><b>Phone number</b></label>
        <input type="text" placeholder="Enter your phone number" name="phoneNum" required>

        <label><b>Email</b></label>
        <input type="text" placeholder="Enter your email address" name="email" required>

        <button type="button" id="approve1" class="approveFormBtn" onclick="approveFormClick()">Approve</button>
        <button type="button" id="deny3" class="denyFormBtn" onclick="denyFormClick()">Deny</button>

        <!--    need to modify-->
    </form>
</div>
<!--从templates/fragments/footer.html 引入的footer-->
<!--<div th:replace="fragments/footer :: footer"></div>-->

<!--你可以在下面添加自己想添加的JavaScript-->
<script>
    function openTabs(evt, tabName) {
        var i, tabcontent, tablinks;
        tabcontent = document.getElementsByClassName("tabcontent");
        for (i = 0; i < tabcontent.length; i++) {
            tabcontent[i].style.display = "none";
        }
        tablinks = document.getElementsByClassName("tablinks");
        for (i = 0; i < tablinks.length; i++) {
            tablinks[i].className = tablinks[i].className.replace(" active", "");
        }
        document.getElementById(tabName).style.display = "block";
        evt.currentTarget.className += " active";
    }

    document.getElementById("defaultOpen").click();

    const fileInput = document.getElementById('fileInput');
    const imageContainer = document.getElementById('imageContainer');

    fileInput.addEventListener('change', (e) => {
        const files = e.target.files;
        let imageCount = imageContainer.querySelectorAll('.displayed-image').length;

        for (let i = 0; i < files.length; i++) {
            const file = files[i];

            if (imageCount >= 8) {
                alert('Maximum of 8 photos reached.');
                break;
            }

            const imageElement = document.createElement('div');
            imageElement.classList.add('image-wrapper');

            const img = document.createElement('img');
            img.classList.add('displayed-image');

            const deleteButton = document.createElement('button');
            deleteButton.classList.add('delete-button');
            deleteButton.textContent = 'X';

            const reader = new FileReader();

            reader.onload = (event) => {
                img.src = event.target.result;
            };

            reader.readAsDataURL(file);

            // Add a click event listener to the delete button
            deleteButton.addEventListener('click', () => {
                imageContainer.removeChild(imageElement);
                imageCount--;
            });

            imageElement.appendChild(img);
            imageElement.appendChild(deleteButton);

            // Append the new photo to the container
            imageContainer.appendChild(imageElement);

            imageCount++;
        }

        // Clear the file input to allow adding more files
        fileInput.value = '';
    });







    function openREForm() {
        document.getElementById("reForm").style.display = "block";
        document.getElementById("layer").style.display = "block";
    }
    function closeREForm() {
        document.getElementById("reForm").style.display = "none";
        document.getElementById("layer").style.display = "none";
    }

    function approveClick() {
        document.getElementById("review2").style.display = "block";
        document.getElementById("review").style.display = "none";
        document.getElementById("approve").style.display = "none";
        document.getElementById("deny").style.display = "none";
    }

    function denyClick() {
        document.getElementById("deny2").style.display = "block";
        document.getElementById("review").style.display = "none";
        document.getElementById("approve").style.display = "none";
        document.getElementById("deny").style.display = "none";
    }

    function approveFormClick() {
        document.getElementById("reForm").style.display = "none";
        document.getElementById("layer").style.display = "none";
        document.getElementById("review2").style.display = "block";
        document.getElementById("review").style.display = "none";
        document.getElementById("approve").style.display = "none";
        document.getElementById("deny").style.display = "none";
    }

    function denyFormClick() {
        document.getElementById("reForm").style.display = "none";
        document.getElementById("layer").style.display = "none";
        document.getElementById("deny2").style.display = "block";
        document.getElementById("review").style.display = "none";
        document.getElementById("approve").style.display = "none";
        document.getElementById("deny").style.display = "none";
    }


</script>

</body>
</html>